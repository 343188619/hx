<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>化学学习助手 - 元素周期表与公式背诵</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #007AFF;
            --secondary: #5856D6;
            --background: #FFFFFF;
            --card-bg: rgba(255, 255, 255, 0.8);
            --text: #000000;
            --text-secondary: #666666;
            --element-bg: #F2F2F7;
            --success: #34C759;
            --warning: #FF9500;
            --danger: #FF3B30;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --border-radius: 12px;
        }

        [data-theme="dark"] {
            --background: #000000;
            --card-bg: rgba(28, 28, 30, 0.8);
            --text: #FFFFFF;
            --text-secondary: #AAAAAA;
            --element-bg: #1C1C1E;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            transition: var(--transition);
        }

        body {
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            animation: fadeInDown 0.8s ease-out;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
        }

        .theme-toggle {
            background: var(--card-bg);
            border-radius: 20px;
            width: 60px;
            height: 30px;
            position: relative;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            padding: 0 5px;
            box-shadow: var(--shadow);
        }

        .theme-toggle .toggle-thumb {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            transition: transform 0.3s ease;
        }

        [data-theme="dark"] .theme-toggle .toggle-thumb {
            transform: translateX(30px);
        }

        .tabs {
            display: flex;
            margin: 20px 0;
            gap: 10px;
            animation: fadeIn 0.8s 0.2s both;
        }

        .tab {
            padding: 12px 24px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            box-shadow: var(--shadow);
            text-align: center;
            flex: 1;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 6px;
            margin: 20px 0;
            animation: zoomIn 0.8s 0.4s both;
        }

        .element {
            aspect-ratio: 1/1;
            background: var(--element-bg);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4px;
            cursor: pointer;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        .element:hover {
            transform: translateY(-5px) scale(1.05);
        }

        .element .number {
            font-size: 10px;
            align-self: flex-start;
            color: var(--text-secondary);
        }

        .element .symbol {
            font-size: 16px;
            font-weight: 700;
        }

        .element .name {
            font-size: 8px;
            color: var(--text-secondary);
        }

        .element-detail {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: var(--card-bg);
            width: 90%;
            max-width: 400px;
            border-radius: var(--border-radius);
            padding: 20px;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .element-detail.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: all;
        }

        .element-detail h2 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .element-detail h2 .symbol {
            font-size: 32px;
            font-weight: 700;
            margin-right: 10px;
        }

        .element-detail h2 .name {
            font-size: 20px;
            color: var(--text-secondary);
        }

        .element-detail .properties {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .element-detail .property {
            margin-bottom: 10px;
        }

        .element-detail .property .label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .element-detail .property .value {
            font-size: 16px;
            font-weight: 500;
        }

        .close-detail {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .test-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.8s 0.4s both;
        }

        .test-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .test-option {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: var(--element-bg);
            border-radius: 8px;
            cursor: pointer;
        }

        .test-option.active {
            background: var(--primary);
            color: white;
        }

        .test-area {
            margin-top: 20px;
        }

        .test-input {
            width: 100%;
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--text-secondary);
            background: var(--background);
            color: var(--text);
            font-size: 16px;
            margin-bottom: 15px;
        }

        .test-controls {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border-radius: var(--border-radius);
            border: none;
            font-weight: 500;
            cursor: pointer;
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-secondary {
            background: var(--element-bg);
            color: var(--text);
        }

        .test-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: var(--border-radius);
            background: var(--element-bg);
            display: none;
        }

        .test-result.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .result-correct {
            background: rgba(52, 199, 89, 0.2);
            border-left: 4px solid var(--success);
        }

        .result-incorrect {
            background: rgba(255, 59, 48, 0.2);
            border-left: 4px solid var(--danger);
        }

        .formulas-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
            animation: fadeIn 0.8s 0.4s both;
        }

        .formula-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .formula-name {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .formula-equation {
            font-size: 20px;
            text-align: center;
            margin: 15px 0;
            font-family: "Times New Roman", serif;
        }

        .formula-description {
            font-size: 14px;
            color: var(--text-secondary);
        }

        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
            color: var(--text-secondary);
            font-size: 14px;
            animation: fadeIn 0.8s 0.6s both;
        }

        /* 动画定义 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from { 
                opacity: 0;
                transform: translateY(-20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .periodic-table {
                grid-template-columns: repeat(9, 1fr);
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .formulas-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .periodic-table {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .element-detail {
                width: 95%;
            }
        }

        /* 元素分类颜色 */
        .element.nonmetal { background-color: rgba(52, 199, 89, 0.15); }
        .element.noble-gas { background-color: rgba(90, 200, 250, 0.15); }
        .element.alkali-metal { background-color: rgba(255, 149, 0, 0.15); }
        .element.alkaline-earth { background-color: rgba(255, 204, 0, 0.15); }
        .element.metalloid { background-color: rgba(175, 82, 222, 0.15); }
        .element.halogen { background-color: rgba(0, 122, 255, 0.15); }
        .element.metal { background-color: rgba(255, 45, 85, 0.15); }
        .element.transition-metal { background-color: rgba(88, 86, 214, 0.15); }
        .element.lanthanide { background-color: rgba(52, 199, 89, 0.15); }
        .element.actinide { background-color: rgba(90, 200, 250, 0.15); }

        [data-theme="dark"] .element.nonmetal { background-color: rgba(52, 199, 89, 0.25); }
        [data-theme="dark"] .element.noble-gas { background-color: rgba(90, 200, 250, 0.25); }
        [data-theme="dark"] .element.alkali-metal { background-color: rgba(255, 149, 0, 0.25); }
        [data-theme="dark"] .element.alkaline-earth { background-color: rgba(255, 204, 0, 0.25); }
        [data-theme="dark"] .element.metalloid { background-color: rgba(175, 82, 222, 0.25); }
        [data-theme="dark"] .element.halogen { background-color: rgba(0, 122, 255, 0.25); }
        [data-theme="dark"] .element.metal { background-color: rgba(255, 45, 85, 0.25); }
        [data-theme="dark"] .element.transition-metal { background-color: rgba(88, 86, 214, 0.25); }
        [data-theme="dark"] .element.lanthanide { background-color: rgba(52, 199, 89, 0.25); }
        [data-theme="dark"] .element.actinide { background-color: rgba(90, 200, 250, 0.25); }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    <div class="overlay"></div>
    
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-atom"></i>
                <span>化学学习助手</span>
            </div>
            <button class="theme-toggle" id="themeToggle">
                <div class="toggle-thumb"></div>
            </button>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-tab="periodic-table">元素周期表</div>
            <div class="tab" data-tab="formulas">化学公式</div>
            <div class="tab" data-tab="test">自我测试</div>
        </div>
        
        <div class="tab-content active" id="periodic-table-content">
            <div class="periodic-table" id="periodic-table">
                <!-- 元素将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="tab-content" id="formulas-content">
            <div class="formulas-container">
                <!-- 化学公式将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="tab-content" id="test-content">
            <div class="test-container">
                <h2>元素记忆测试</h2>
                <p>测试您对化学元素的掌握程度</p>
                
                <div class="test-options">
                    <div class="test-option active" data-mode="symbol-to-name">根据符号写名称</div>
                    <div class="test-option" data-mode="name-to-symbol">根据名称写符号</div>
                </div>
                
                <div class="test-area">
                    <input type="text" class="test-input" id="testInput" placeholder="请输入答案">
                    <div class="test-controls">
                        <button class="btn btn-primary" id="checkAnswer">
                            <i class="fas fa-check"></i>
                            <span>检查答案</span>
                        </button>
                        <button class="btn btn-secondary" id="nextQuestion">
                            <i class="fas fa-forward"></i>
                            <span>下一题</span>
                        </button>
                    </div>
                    
                    <div class="test-result" id="testResult"></div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>版权所有 &copy; 2025 KSF. 保留所有权利。</p>
        </footer>
    </div>
    
    <div class="element-detail">
        <button class="close-detail">
            <i class="fas fa-times"></i>
        </button>
        <h2>
            <span class="symbol" id="detailSymbol"></span>
            <span class="name" id="detailName"></span>
        </h2>
        <div class="properties">
            <div class="property">
                <div class="label">原子序数</div>
                <div class="value" id="detailNumber"></div>
            </div>
            <div class="property">
                <div class="label">原子量</div>
                <div class="value" id="detailWeight"></div>
            </div>
            <div class="property">
                <div class="label">类别</div>
                <div class="value" id="detailCategory"></div>
            </div>
            <div class="property">
                <div class="label">电子排布</div>
                <div class="value" id="detailElectron"></div>
            </div>
            <div class="property">
                <div class="label">熔点</div>
                <div class="value" id="detailMelting"></div>
            </div>
            <div class="property">
                <div class="label">沸点</div>
                <div class="value" id="detailBoiling"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // 元素数据
        const elements = [
            { number: 1, symbol: "H", name: "氢", weight: 1.008, category: "非金属", electron: "1s¹", melting: "-259.16°C", boiling: "-252.87°C" },
            { number: 2, symbol: "He", name: "氦", weight: 4.0026, category: "稀有气体", electron: "1s²", melting: "-272.2°C", boiling: "-268.93°C" },
            { number: 3, symbol: "Li", name: "锂", weight: 6.94, category: "碱金属", electron: "[He] 2s¹", melting: "180.54°C", boiling: "1342°C" },
            { number: 4, symbol: "Be", name: "铍", weight: 9.0122, category: "碱土金属", electron: "[He] 2s²", melting: "1287°C", boiling: "2470°C" },
            { number: 5, symbol: "B", name: "硼", weight: 10.81, category: "类金属", electron: "[He] 2s² 2p¹", melting: "2076°C", boiling: "3927°C" },
            { number: 6, symbol: "C", name: "碳", weight: 12.011, category: "非金属", electron: "[He] 2s² 2p²", melting: "3550°C", boiling: "4027°C" },
            { number: 7, symbol: "N", name: "氮", weight: 14.007, category: "非金属", electron: "[He] 2s² 2p³", melting: "-210°C", boiling: "-195.8°C" },
            { number: 8, symbol: "O", name: "氧", weight: 15.999, category: "非金属", electron: "[He] 2s² 2p⁴", melting: "-218.79°C", boiling: "-182.96°C" },
            { number: 9, symbol: "F", name: "氟", weight: 18.998, category: "卤素", electron: "[He] 2s² 2p⁵", melting: "-219.67°C", boiling: "-188.11°C" },
            { number: 10, symbol: "Ne", name: "氖", weight: 20.18, category: "稀有气体", electron: "[He] 2s² 2p⁶", melting: "-248.59°C", boiling: "-246.05°C" },
            { number: 11, symbol: "Na", name: "钠", weight: 22.99, category: "碱金属", electron: "[Ne] 3s¹", melting: "97.72°C", boiling: "882.9°C" },
            { number: 12, symbol: "Mg", name: "镁", weight: 24.305, category: "碱土金属", electron: "[Ne] 3s²", melting: "650°C", boiling: "1090°C" },
            { number: 13, symbol: "Al", name: "铝", weight: 26.982, category: "金属", electron: "[Ne] 3s² 3p¹", melting: "660.32°C", boiling: "2519°C" },
            { number: 14, symbol: "Si", name: "硅", weight: 28.085, category: "类金属", electron: "[Ne] 3s² 3p²", melting: "1414°C", boiling: "2900°C" },
            { number: 15, symbol: "P", name: "磷", weight: 30.974, category: "非金属", electron: "[Ne] 3s² 3p³", melting: "44.15°C", boiling: "280.5°C" },
            { number: 16, symbol: "S", name: "硫", weight: 32.06, category: "非金属", electron: "[Ne] 3s² 3p⁴", melting: "115.21°C", boiling: "444.6°C" },
            { number: 17, symbol: "Cl", name: "氯", weight: 35.45, category: "卤素", electron: "[Ne] 3s² 3p⁵", melting: "-101.5°C", boiling: "-34.04°C" },
            { number: 18, symbol: "Ar", name: "氩", weight: 39.948, category: "稀有气体", electron: "[Ne] 3s² 3p⁶", melting: "-189.34°C", boiling: "-185.85°C" },
            { number: 19, symbol: "K", name: "钾", weight: 39.098, category: "碱金属", electron: "[Ar] 4s¹", melting: "63.38°C", boiling: "759°C" },
            { number: 20, symbol: "Ca", name: "钙", weight: 40.078, category: "碱土金属", electron: "[Ar] 4s²", melting: "842°C", boiling: "1484°C" },
            { number: 21, symbol: "Sc", name: "钪", weight: 44.956, category: "过渡金属", electron: "[Ar] 3d¹ 4s²", melting: "1541°C", boiling: "2836°C" },
            { number: 22, symbol: "Ti", name: "钛", weight: 47.867, category: "过渡金属", electron: "[Ar] 3d² 4s²", melting: "1668°C", boiling: "3287°C" },
            { number: 23, symbol: "V", name: "钒", weight: 50.942, category: "过渡金属", electron: "[Ar] 3d³ 4s²", melting: "1910°C", boiling: "3407°C" },
            { number: 24, symbol: "Cr", name: "铬", weight: 51.996, category: "过渡金属", electron: "[Ar] 3d⁵ 4s¹", melting: "1907°C", boiling: "2671°C" },
            { number: 25, symbol: "Mn", name: "锰", weight: 54.938, category: "过渡金属", electron: "[Ar] 3d⁵ 4s²", melting: "1246°C", boiling: "2061°C" },
            { number: 26, symbol: "Fe", name: "铁", weight: 55.845, category: "过渡金属", electron: "[Ar] 3d⁶ 4s²", melting: "1538°C", boiling: "2862°C" },
            { number: 27, symbol: "Co", name: "钴", weight: 58.933, category: "过渡金属", electron: "[Ar] 3d⁷ 4s²", melting: "1495°C", boiling: "2927°C" },
            { number: 28, symbol: "Ni", name: "镍", weight: 58.693, category: "过渡金属", electron: "[Ar] 3d⁸ 4s²", melting: "1455°C", boiling: "2913°C" },
            { number: 29, symbol: "Cu", name: "铜", weight: 63.546, category: "过渡金属", electron: "[Ar] 3d¹⁰ 4s¹", melting: "1085°C", boiling: "2562°C" },
            { number: 30, symbol: "Zn", name: "锌", weight: 65.38, category: "过渡金属", electron: "[Ar] 3d¹⁰ 4s²", melting: "419.53°C", boiling: "907°C" },
            { number: 31, symbol: "Ga", name: "镓", weight: 69.723, category: "金属", electron: "[Ar] 3d¹⁰ 4s² 4p¹", melting: "29.76°C", boiling: "2204°C" },
            { number: 32, symbol: "Ge", name: "锗", weight: 72.63, category: "类金属", electron: "[Ar] 3d¹⁰ 4s² 4p²", melting: "938.25°C", boiling: "2833°C" },
            { number: 33, symbol: "As", name: "砷", weight: 74.922, category: "类金属", electron: "[Ar] 3d¹⁰ 4s² 4p³", melting: "817°C", boiling: "614°C" }
        ];

        // 化学公式数据
        const formulas = [
            { name: "质量守恒定律", equation: "质量在化学反应中既不会创生也不会消失", description: "化学反应前后，参加反应的各物质的质量总和等于反应后生成的各物质的质量总和。" },
            { name: "水的电解", equation: "2H₂O → 2H₂ + O₂", description: "水在直流电作用下分解成氢气和氧气。" },
            { name: "光合作用", equation: "6CO₂ + 6H₂O → C₆H₁₂O₆ + 6O₂", description: "植物利用光能将二氧化碳和水转化为葡萄糖和氧气。" },
            { name: "呼吸作用", equation: "C₆H₁₂O₆ + 6O₂ → 6CO₂ + 6H₂O + 能量", description: "生物体将葡萄糖和氧气转化为二氧化碳、水和能量。" },
            { name: "酸碱中和", equation: "HCl + NaOH → NaCl + H₂O", description: "酸和碱反应生成盐和水。" },
            { name: "燃烧反应", equation: "CH₄ + 2O₂ → CO₂ + 2H₂O", description: "甲烷在氧气中燃烧生成二氧化碳和水。" },
            { name: "氧化还原", equation: "Zn + CuSO₄ → ZnSO₄ + Cu", description: "锌置换出硫酸铜中的铜，是氧化还原反应。" }
        ];

        // 初始化函数
        function init() {
            // 初始化粒子背景
            particlesJS("particles-js", {
                particles: {
                    number: { value: 40, density: { enable: true, value_area: 800 } },
                    color: { value: ["#007AFF", "#5856D6", "#34C759", "#FF9500"] },
                    shape: { type: "circle" },
                    opacity: { value: 0.5, random: true },
                    size: { value: 3, random: true },
                    line_linked: { enable: true, distance: 150, color: "#007AFF", opacity: 0.2, width: 1 },
                    move: { enable: true, speed: 2, direction: "none", random: true, out_mode: "out" }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "bubble" },
                        onclick: { enable: true, mode: "push" }
                    },
                    modes: {
                        bubble: { distance: 200, size: 5, duration: 2, opacity: 0.2 },
                        push: { particles_nb: 3 }
                    }
                }
            });

            // 渲染元素周期表
            renderPeriodicTable();
            
            // 渲染化学公式
            renderFormulas();
            
            // 初始化标签切换
            initTabs();
            
            // 初始化主题切换
            initThemeToggle();
            
            // 初始化测试功能
            initTest();
        }

        // 渲染元素周期表
        function renderPeriodicTable() {
            const tableContainer = document.getElementById("periodic-table");
            tableContainer.innerHTML = "";
            
            elements.forEach(element => {
                const elementDiv = document.createElement("div");
                elementDiv.className = `element ${getCategoryClass(element.category)}`;
                elementDiv.innerHTML = `
                    <div class="number">${element.number}</div>
                    <div class="symbol">${element.symbol}</div>
                    <div class="name">${element.name}</div>
                `;
                
                elementDiv.addEventListener("click", () => showElementDetail(element));
                tableContainer.appendChild(elementDiv);
            });
        }

        // 获取元素类别对应的CSS类
        function getCategoryClass(category) {
            const categoryMap = {
                "非金属": "nonmetal",
                "稀有气体": "noble-gas",
                "碱金属": "alkali-metal",
                "碱土金属": "alkaline-earth",
                "类金属": "metalloid",
                "卤素": "halogen",
                "金属": "metal",
                "过渡金属": "transition-metal"
            };
            
            return categoryMap[category] || "";
        }

        // 显示元素详情
        function showElementDetail(element) {
            document.getElementById("detailSymbol").textContent = element.symbol;
            document.getElementById("detailName").textContent = element.name;
            document.getElementById("detailNumber").textContent = element.number;
            document.getElementById("detailWeight").textContent = element.weight;
            document.getElementById("detailCategory").textContent = element.category;
            document.getElementById("detailElectron").textContent = element.electron;
            document.getElementById("detailMelting").textContent = element.melting;
            document.getElementById("detailBoiling").textContent = element.boiling;
            
            document.querySelector(".element-detail").classList.add("active");
            document.querySelector(".overlay").classList.add("active");
        }

        // 渲染化学公式
        function renderFormulas() {
            const formulasContainer = document.getElementById("formulas-content");
            formulasContainer.innerHTML = "";
            
            const formulasDiv = document.createElement("div");
            formulasDiv.className = "formulas-container";
            
            formulas.forEach(formula => {
                const formulaCard = document.createElement("div");
                formulaCard.className = "formula-card";
                formulaCard.innerHTML = `
                    <div class="formula-name">${formula.name}</div>
                    <div class="formula-equation">${formula.equation}</div>
                    <div class="formula-description">${formula.description}</div>
                `;
                
                formulasDiv.appendChild(formulaCard);
            });
            
            formulasContainer.appendChild(formulasDiv);
        }

        // 初始化标签切换
        function initTabs() {
            const tabs = document.querySelectorAll(".tab");
            tabs.forEach(tab => {
                tab.addEventListener("click", () => {
                    // 移除所有标签的活动状态
                    tabs.forEach(t => t.classList.remove("active"));
                    
                    // 设置当前标签为活动状态
                    tab.classList.add("active");
                    
                    // 隐藏所有内容
                    document.querySelectorAll(".tab-content").forEach(content => {
                        content.classList.remove("active");
                    });
                    
                    // 显示对应内容
                    const tabId = `${tab.dataset.tab}-content`;
                    document.getElementById(tabId).classList.add("active");
                });
            });
        }

        // 初始化主题切换
        function initThemeToggle() {
            const themeToggle = document.getElementById("themeToggle");
            const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)");
            
            // 检查系统偏好
            if (prefersDarkScheme.matches) {
                document.documentElement.setAttribute("data-theme", "dark");
            }
            
            // 切换主题
            themeToggle.addEventListener("click", () => {
                const currentTheme = document.documentElement.getAttribute("data-theme");
                if (currentTheme === "dark") {
                    document.documentElement.removeAttribute("data-theme");
                } else {
                    document.documentElement.setAttribute("data-theme", "dark");
                }
            });
        }

        // 初始化测试功能
        function initTest() {
            const testOptions = document.querySelectorAll(".test-option");
            const checkButton = document.getElementById("checkAnswer");
            const nextButton = document.getElementById("nextQuestion");
            const testInput = document.getElementById("testInput");
            const testResult = document.getElementById("testResult");
            
            let currentMode = "symbol-to-name";
            let currentElement = null;
            
            // 设置测试模式
            testOptions.forEach(option => {
                option.addEventListener("click", () => {
                    testOptions.forEach(o => o.classList.remove("active"));
                    option.classList.add("active");
                    currentMode = option.dataset.mode;
                    nextQuestion();
                });
            });
            
            // 检查答案
            checkButton.addEventListener("click", checkAnswer);
            
            // 下一题
            nextButton.addEventListener("click", nextQuestion);
            
            // 回车键检查答案
            testInput.addEventListener("keypress", (e) => {
                if (e.key === "Enter") {
                    checkAnswer();
                }
            });
            
            // 生成新问题
            function nextQuestion() {
                testInput.value = "";
                testResult.classList.remove("show");
                
                // 随机选择一个元素
                currentElement = elements[Math.floor(Math.random() * elements.length)];
                
                if (currentMode === "symbol-to-name") {
                    testInput.placeholder = `请输入"${currentElement.symbol}"的中文名称`;
                } else {
                    testInput.placeholder = `请输入"${currentElement.name}"的元素符号`;
                }
            }
            
            // 检查答案
            function checkAnswer() {
                const userAnswer = testInput.value.trim();
                let isCorrect = false;
                let correctAnswer = "";
                
                if (currentMode === "symbol-to-name") {
                    isCorrect = userAnswer === currentElement.name;
                    correctAnswer = currentElement.name;
                } else {
                    isCorrect = userAnswer.toUpperCase() === currentElement.symbol;
                    correctAnswer = currentElement.symbol;
                }
                
                testResult.textContent = isCorrect ? 
                    `✓ 回答正确！${currentMode === "symbol-to-name" ? "中文名称" : "元素符号"}是 ${correctAnswer}` : 
                    `✗ 回答错误。正确答案是: ${correctAnswer}`;
                
                testResult.className = "test-result " + (isCorrect ? "result-correct" : "result-incorrect");
                testResult.classList.add("show");
            }
            
            // 初始问题
            nextQuestion();
        }

        // 关闭元素详情
        document.querySelector(".close-detail").addEventListener("click", () => {
            document.querySelector(".element-detail").classList.remove("active");
            document.querySelector(".overlay").classList.remove("active");
        });

        // 初始化应用
        window.addEventListener("DOMContentLoaded", init);
    </script>
</body>
</html>

